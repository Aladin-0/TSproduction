{% extends 'admin_panel/base.html' %}

{% block title %}Settings - TechVerse Admin{% endblock %}

{% block page_title %}System Settings{% endblock %}

{% block top_actions %}
<button class="btn btn-primary" onclick="saveAllSettings()">
    <i class="fas fa-save"></i>
    Save All Changes
</button>
<button class="btn btn-secondary" onclick="resetToDefaults()">
    <i class="fas fa-undo"></i>
    Reset to Defaults
</button>
{% endblock %}

{% block content %}
<div style="display: grid; grid-template-columns: 250px 1fr; gap: 30px;">
    <!-- Settings Navigation -->
    <div class="table-container" style="height: fit-content;">
        <div class="table-header">
            <h3 class="table-title">Settings</h3>
        </div>
        <nav style="padding: 20px 0;">
            <div class="settings-nav">
                <a href="#general" class="settings-nav-item active" onclick="showSettingsSection('general', this)">
                    <i class="fas fa-cog"></i>
                    General
                </a>
                <a href="#business" class="settings-nav-item" onclick="showSettingsSection('business', this)">
                    <i class="fas fa-building"></i>
                    Business Info
                </a>
                <a href="#email" class="settings-nav-item" onclick="showSettingsSection('email', this)">
                    <i class="fas fa-envelope"></i>
                    Email Settings
                </a>
                <a href="#notifications" class="settings-nav-item" onclick="showSettingsSection('notifications', this)">
                    <i class="fas fa-bell"></i>
                    Notifications
                </a>
                <a href="#security" class="settings-nav-item" onclick="showSettingsSection('security', this)">
                    <i class="fas fa-shield-alt"></i>
                    Security
                </a>
                <a href="#payment" class="settings-nav-item" onclick="showSettingsSection('payment', this)">
                    <i class="fas fa-credit-card"></i>
                    Payment
                </a>
                <a href="#advanced" class="settings-nav-item" onclick="showSettingsSection('advanced', this)">
                    <i class="fas fa-code"></i>
                    Advanced
                </a>
            </div>
        </nav>
    </div>

    <!-- Settings Content -->
    <div>
        <!-- General Settings -->
        <div id="general-settings" class="settings-section">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">General Settings</h3>
                </div>
                <div style="padding: 30px;">
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label class="form-label">Site Title</label>
                        <input type="text" class="form-control" value="TechVerse" placeholder="Enter site title">
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label class="form-label">Site Description</label>
                        <textarea class="form-control" rows="3" placeholder="Enter site description">Your Gateway to Innovation - Premium tech products and expert services</textarea>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Default Currency</label>
                            <select class="form-control">
                                <option value="INR" selected>Indian Rupee (₹)</option>
                                <option value="USD">US Dollar ($)</option>
                                <option value="EUR">Euro (€)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Timezone</label>
                            <select class="form-control">
                                <option value="Asia/Kolkata" selected>Asia/Kolkata (UTC+05:30)</option>
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">America/New_York</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Site Logo</label>
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-image" style="font-size: 24px; color: rgba(255,255,255,0.3);"></i>
                            </div>
                            <div>
                                <button class="btn btn-secondary">
                                    <i class="fas fa-upload"></i>
                                    Upload Logo
                                </button>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.5); margin-top: 5px;">
                                    Recommended size: 200x80px
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Business Information -->
        <div id="business-settings" class="settings-section" style="display: none;">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">Business Information</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">Business Name</label>
                            <input type="text" class="form-control" value="TechVerse Technologies Pvt Ltd">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Contact Email</label>
                            <input type="email" class="form-control" value="contact@techverse.com">
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" value="+91 9876543210">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">GST Number</label>
                            <input type="text" class="form-control" value="27AABCT1234L1Z5">
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label class="form-label">Business Address</label>
                        <textarea class="form-control" rows="3">123 Tech Street, Cyber City, Mumbai, Maharashtra - 400001, India</textarea>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Support Hours</label>
                            <input type="text" class="form-control" value="9:00 AM - 6:00 PM">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Support Days</label>
                            <input type="text" class="form-control" value="Monday - Saturday">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Emergency Contact</label>
                            <input type="tel" class="form-control" value="+91 9876543211">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Email Settings -->
        <div id="email-settings" class="settings-section" style="display: none;">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">Email Configuration</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">SMTP Server</label>
                            <input type="text" class="form-control" value="smtp.gmail.com">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">SMTP Port</label>
                            <input type="number" class="form-control" value="587">
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="email" class="form-control" value="noreply@techverse.com">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" value="••••••••••••">
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" checked style="width: 18px; height: 18px;">
                            <span>Use TLS/SSL Encryption</span>
                        </label>
                    </div>
                    
                    <div style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px; margin-top: 20px;">
                        <button class="btn btn-secondary">
                            <i class="fas fa-paper-plane"></i>
                            Send Test Email
                        </button>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Email Templates</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div>
                                <div style="font-weight: 600;">Order Confirmation</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Sent when customer places an order</div>
                            </div>
                            <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                <i class="fas fa-edit"></i>
                                Edit
                            </button>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div>
                                <div style="font-weight: 600;">Service Request Confirmation</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Sent when customer submits service request</div>
                            </div>
                            <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                <i class="fas fa-edit"></i>
                                Edit
                            </button>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div>
                                <div style="font-weight: 600;">Welcome Email</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Sent to new customers</div>
                            </div>
                            <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                <i class="fas fa-edit"></i>
                                Edit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifications-settings" class="settings-section" style="display: none;">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">Admin Notifications</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">New Order Notifications</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Get notified when new orders are placed</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Service Request Notifications</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Get notified about new service requests</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Low Stock Alerts</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Get alerted when products are running low</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Customer Reviews</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Get notified about new customer reviews</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">System Updates</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Get notified about system updates and maintenance</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Notification Settings</h3>
                </div>
                <div style="padding: 30px;">
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label class="form-label">Low Stock Threshold</label>
                        <input type="number" class="form-control" value="5" min="1">
                        <div style="font-size: 12px; color: rgba(255,255,255,0.5); margin-top: 5px;">
                            Send alert when stock falls below this number
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Daily Report Time</label>
                        <input type="time" class="form-control" value="09:00">
                        <div style="font-size: 12px; color: rgba(255,255,255,0.5); margin-top: 5px;">
                            Time to send daily summary reports
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security Settings -->
        <div id="security-settings" class="settings-section" style="display: none;">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">Security Settings</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Two-Factor Authentication</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Add an extra layer of security to admin accounts</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Login Attempt Monitoring</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Monitor and log failed login attempts</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Session Timeout</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Auto-logout after period of inactivity</div>
                            </div>
                            <select class="form-control" style="width: 150px;">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">IP Whitelisting</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Restrict admin access to specific IP addresses</div>
                            </div>
                            <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                Configure
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Password Policy</h3>
                </div>
                <div style="padding: 30px;">
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label class="form-label">Minimum Password Length</label>
                        <input type="number" class="form-control" value="8" min="6" max="20">
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" checked style="width: 18px; height: 18px;">
                            <span>Require uppercase letters</span>
                        </label>
                        
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" checked style="width: 18px; height: 18px;">
                            <span>Require lowercase letters</span>
                        </label>
                        
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" checked style="width: 18px; height: 18px;">
                            <span>Require numbers</span>
                        </label>
                        
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px;">
                            <span>Require special characters</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Settings -->
        <div id="payment-settings" class="settings-section" style="display: none;">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">Payment Gateways</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: rgba(59, 130, 246, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-credit-card" style="color: #3b82f6;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">Razorpay</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Credit/Debit Cards, UPI, Net Banking</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span class="status-badge status-completed">Active</span>
                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                    Configure
                                </button>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: rgba(16, 185, 129, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-mobile-alt" style="color: #10b981;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">PayU</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.6);">UPI, Wallets, EMI Options</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span class="status-badge status-cancelled">Inactive</span>
                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                    Configure
                                </button>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 40px; height: 40px; background: rgba(251, 191, 36, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-money-bill" style="color: #fbbf24;"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">Cash on Delivery</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.6);">Pay when product is delivered</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span class="status-badge status-completed">Active</span>
                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Tax Settings</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Default Tax Rate (%)</label>
                            <input type="number" class="form-control" value="18" step="0.01" min="0" max="100">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Tax Display</label>
                            <select class="form-control">
                                <option value="inclusive" selected>Inclusive of tax</option>
                                <option value="exclusive">Exclusive of tax</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Advanced Settings -->
        <div id="advanced-settings" class="settings-section" style="display: none;">
            <div class="table-container" style="margin-bottom: 30px;">
                <div class="table-header">
                    <h3 class="table-title">System Maintenance</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <button class="btn btn-secondary" style="padding: 15px;">
                            <i class="fas fa-database"></i>
                            <div style="margin-top: 5px;">Backup Database</div>
                        </button>
                        
                        <button class="btn btn-secondary" style="padding: 15px;">
                            <i class="fas fa-broom"></i>
                            <div style="margin-top: 5px;">Clear Cache</div>
                        </button>
                        
                        <button class="btn btn-secondary" style="padding: 15px;">
                            <i class="fas fa-file-export"></i>
                            <div style="margin-top: 5px;">Export Data</div>
                        </button>
                        
                        <button class="btn btn-danger" style="padding: 15px;">
                            <i class="fas fa-tools"></i>
                            <div style="margin-top: 5px;">Maintenance Mode</div>
                        </button>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">System Information</h3>
                </div>
                <div style="padding: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <div style="margin-bottom: 15px;">
                                <strong>Server Information</strong>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px; font-size: 14px;">
                                <div>Django Version: 5.2.5</div>
                                <div>Python Version: 3.11.5</div>
                                <div>Database: SQLite</div>
                                <div>Server: Development</div>
                            </div>
                        </div>
                        
                        <div>
                            <div style="margin-bottom: 15px;">
                                <strong>Application Information</strong>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px; font-size: 14px;">
                                <div>Version: 1.0.0</div>
                                <div>Environment: Development</div>
                                <div>Debug Mode: Enabled</div>
                                <div>Last Updated: {{ user.last_login|date:"M d, Y" }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .settings-nav {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .settings-nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-size: 14px;
        font-weight: 500;
    }

    .settings-nav-item:hover {
        background: rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.9);
        transform: translateX(3px);
    }

    .settings-nav-item.active {
        background: linear-gradient(135deg, rgba(96, 165, 250, 0.2), rgba(59, 130, 246, 0.1));
        color: #60a5fa;
        border-left: 3px solid #60a5fa;
    }

    .settings-nav-item i {
        width: 18px;
        text-align: center;
        font-size: 16px;
    }

    .settings-section {
        animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Toggle Switch Styles */
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(255, 255, 255, 0.2);
        transition: .3s;
        border-radius: 24px;
    }

    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .3s;
        border-radius: 50%;
    }

    input:checked + .toggle-slider {
        background-color: #60a5fa;
    }

    input:checked + .toggle-slider:before {
        transform: translateX(26px);
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    // Settings navigation
    function showSettingsSection(sectionId, navItem) {
        // Hide all sections
        document.querySelectorAll('.settings-section').forEach(section => {
            section.style.display = 'none';
        });
        
        // Show selected section
        document.getElementById(sectionId + '-settings').style.display = 'block';
        
        // Update navigation
        document.querySelectorAll('.settings-nav-item').forEach(item => {
            item.classList.remove('active');
        });
        navItem.classList.add('active');
        
        // Update URL hash
        window.location.hash = sectionId;
    }

    // Initialize based on URL hash
    document.addEventListener('DOMContentLoaded', function() {
        const hash = window.location.hash.substring(1);
        if (hash) {
            const navItem = document.querySelector(`[href="#${hash}"]`);
            if (navItem) {
                showSettingsSection(hash, navItem);
            }
        }
    });

    // Save all settings
    function saveAllSettings() {
        const btn = event.target;
        const originalText = btn.innerHTML;
        
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
        btn.disabled = true;
        
        // Simulate save operation
        setTimeout(() => {
            btn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }, 2000);
            
            // Show success message
            showNotification('Settings saved successfully!', 'success');
        }, 1500);
    }

    // Reset to defaults
    function resetToDefaults() {
        if (confirm('Are you sure you want to reset all settings to their default values? This action cannot be undone.')) {
            showNotification('Settings reset to defaults', 'info');
        }
    }

    // Utility function to show notifications
    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `message ${type}`;
        notification.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
            ${message}
        `;
        
        // Insert at the top of content
        const content = document.querySelector('.content');
        content.insertBefore(notification, content.firstChild);
        
        // Remove after 5 seconds
        setTimeout(() => {
            notification.remove();
        }, 5000);
    }

    // Maintenance mode toggle
    document.addEventListener('click', function(e) {
        if (e.target.closest('button')?.textContent.includes('Maintenance Mode')) {
            if (confirm('Enable maintenance mode? This will make the site inaccessible to users.')) {
                showNotification('Maintenance mode enabled', 'warning');
            }
        }
    });

    // Test email functionality
    document.addEventListener('click', function(e) {
        if (e.target.closest('button')?.textContent.includes('Send Test Email')) {
            const btn = e.target.closest('button');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showNotification('Test email sent successfully!', 'success');
            }, 2000);
        }
    });

    // Database backup
    document.addEventListener('click', function(e) {
        if (e.target.closest('button')?.textContent.includes('Backup Database')) {
            const btn = e.target.closest('button');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <div style="margin-top: 5px;">Creating Backup...</div>';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showNotification('Database backup created successfully!', 'success');
            }, 3000);
        }
    });

    // Clear cache
    document.addEventListener('click', function(e) {
        if (e.target.closest('button')?.textContent.includes('Clear Cache')) {
            const btn = e.target.closest('button');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <div style="margin-top: 5px;">Clearing...</div>';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showNotification('Cache cleared successfully!', 'success');
            }, 1500);
        }
    });

    // Auto-save functionality for some settings
    document.addEventListener('change', function(e) {
        if (e.target.type === 'checkbox' && e.target.closest('.settings-section')) {
            // Auto-save toggle switches
            setTimeout(() => {
                showNotification('Setting updated', 'success');
            }, 300);
        }
    });

    // Form validation
    document.addEventListener('input', function(e) {
        if (e.target.type === 'email') {
            const email = e.target.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (email && !emailRegex.test(email)) {
                e.target.style.borderColor = '#ef4444';
            } else {
                e.target.style.borderColor = '';
            }
        }
        
        if (e.target.type === 'tel') {
            const phone = e.target.value.replace(/\D/g, '');
            if (phone && phone.length < 10) {
                e.target.style.borderColor = '#ef4444';
            } else {
                e.target.style.borderColor = '';
            }
        }
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 's') {
            e.preventDefault();
            saveAllSettings();
        }
    });
</script>
{% endblock %}